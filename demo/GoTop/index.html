<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
	<title>RunCode</title>
	<script type="text/javascript">
		window.onload = function(){
			var oBtn = document.getElementById('btn');
			var timer = null;
			// 判断是否在回到顶部过程中中断
			flag = true;

			// 中断滑动
			window.onscroll = function(){
				if(!flag){
					clearInterval(timer);
				}
				flag = false;
			}

			oBtn.onclick = function(){
				timer = setInterval(function(){
					var scrollTop = document.documentElement.scrollTop || document.body.scrollTop;
					var speed = Math.floor(-scrollTop/8);
					if(scrollTop == 0){
						clearInterval(timer);
					}
					flag = true;
					document.documentElement.scrollTop = document.body.scrollTop = scrollTop + speed;
				}, 30);
			}
		}
	</script>

	<style type="text/css">
		#btn{position: fixed; bottom: 10px; right: 50px;}
	</style>
</head>
<body style="height:2000px;">

<input type="button" id="btn" value="回到顶部"/>

</body>
</html>